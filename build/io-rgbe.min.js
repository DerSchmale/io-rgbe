var TYMP=function(r){"use strict";var t=function(){};function e(r,t,e){switch(r){case"+X":e.width=t;break;case"-X":e.width=t,e.flipX=!0,console.warn("Flipping horizontal orientation not currently supported");break;case"-Y":e.height=t;break;case"+Y":e.height=t,e.flipY=!0}}function a(r){for(var t,e="";10!==(t=r.data.getUint8(r.offset++));)e+=String.fromCharCode(t);return e}function o(r,t){var e;if(514!==r.data.getUint16(r.offset))throw new Error("Obsolete HDR file version!");return e=function(r,t){for(var e=t.width,a=t.height,o=t.colorCorr,i=new Float32Array(e*a*3),n=0,f=r.offset,c=r.data,s=0;s<a;++s){if(514!==c.getUint16(f))throw new Error("Incorrect scanline start hash");if(c.getUint16(f+2)!==e)throw new Error("Scanline doesn't match picture dimension!");f+=4;for(var h=4*e,l=[],u=0;u<h;){var g=c.getUint8(f++);if(g>128){var p=g-128;g=c.getUint8(f++);for(var v=0;v<p;++v)l[u++]=g}else for(var w=0;w<g;++w)l[u++]=c.getUint8(f++)}for(u=0;u<e;++u){var d=l[u],m=l[u+e],b=l[u+2*e],E=l[u+3*e];E=E?Math.pow(2,E-136):0,i[n++]=d*E*o[0],i[n++]=m*E*o[1],i[n++]=b*E*o[2]}}return console.log(f,r.data.byteLength),i}(r,t),t.flipX&&function(r,t){for(var e=t.width,a=t.height,o=e>>1,n=0;n<a;++n)for(var f=n*e,c=0;c<o;++c){i(r,f+c,f+e-1-c)}}(e,t),t.flipY&&function(r,t){for(var e=t.width,a=t.height,o=a>>1,n=0;n<o;++n)for(var f=n*e,c=(a-1-n)*e,s=0;s<e;++s)i(r,f+s,c+s)}(e,t),e}function i(r,t,e){t*=3,e*=3;for(var a=0;a<3;++a){var o=r[t+a];r[t+a]=r[e+a],r[e+a]=o}}return r.HDRImageData=t,r.decodeRGBE=function(r){var t={data:r,offset:0},i=function(r){var t=a(r),o={colorCorr:[1,1,1],exposure:1,gamma:1,width:0,height:0,flipX:!1,flipY:!1};if("#?RADIANCE"!==t&&"#?RGBE"!==t)throw new Error("Incorrect file format!");for(;""!==t;){var i=(t=a(r)).split("=");switch(i[0]){case"GAMMA":o.gamma=parseFloat(i[1]);break;case"FORMAT":if("32-bit_rle_rgbe"!==i[1]&&"32-bit_rle_xyze"!==i[1])throw new Error("Incorrect encoding format!");break;case"EXPOSURE":o.exposure=parseFloat(i[1]);break;case"COLORCORR":o.colorCorr=i[1].replace(/^\s+|\s+$/g,"").split(" ").map((function(r){return parseFloat(r)}))}}var n=(t=a(r)).split(" ");return e(n[0],parseInt(n[1]),o),e(n[2],parseInt(n[3]),o),o}(t);return{width:i.width,height:i.height,exposure:i.exposure,gamma:i.gamma,array:o(t,i)}},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
